<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhisperBox - Anonymous Self-Expression</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="script.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" style="display:flex;align-items:center;gap:12px;">
                <div class="logo-icon" style="width:40px;height:40px;background:#2b6ef6;border-radius:8px;display:inline-grid;place-items:center;flex-shrink:0;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 10V8a6 6 0 1112 0v2" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        <rect x="4" y="10" width="16" height="10" rx="2" stroke="white" stroke-width="1.6"/>
                    </svg>
                </div>
                <div style="display:flex;flex-direction:column;gap:2px;">
                    <h1 style="margin:0;font-size:18px;letter-spacing:-0.5px;">WhisperBox</h1>
                    <span style="font-size:11px;color:#6b7280;margin:0;">Safe. Anonymous. Expressive.</span>
                </div>
            </div>
            <ul class="nav-menu">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#categories">Categories</a></li>
                <li><a href="#submit">Submit</a></li>
                <li><a href="#read">Read Letters</a></li>
                <li id="auth-nav">
                    <a href="auth/login.html" class="btn btn-outline" aria-label="Sign in to your account">Sign In</a>
                    <a href="auth/signup.html" class="btn btn-primary" aria-label="Create a new account">Sign Up</a>
                </li>
                <li id="user-nav" style="display: none;">
                    <div class="user-dropdown">
                        <button id="user-menu-btn" class="user-avatar-btn" aria-label="Open user menu">
                            <img id="user-avatar" src="img/default-avatar.png" alt="User avatar" class="user-avatar">
                            <span id="user-display">User</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </button>
                        <div class="user-menu" id="user-menu" style="display:none;">
                            <a href="#my-letters" id="my-letters-link">My Letters</a>
                            <a href="#saved-letters" id="saved-letters-link">Saved Letters</a>
                            <a href="#settings" id="settings-link">Settings</a>
                            <a href="#" id="logout-link">Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Your Safe Space for Anonymous Expression</h1>
            <p>Share your thoughts, emotions, and experiences without revealing your identity</p>
            <a href="#submit" class="cta-button">Share Your Story</a>
        </div>
        <div class="hero-image">
            <div class="floating-letter"></div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <h2>About WhisperBox</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>WhisperBox is a secure and anonymous online platform designed for self-expression. It gives individuals a safe space to share their thoughts, emotions, and experiences without the need to reveal their identity.</p>
                    <p>We recognize that some people struggle to open up in person but still long for connection, understanding, or simply someone to listen to. Here, every voice matters even when it's anonymous.</p>
                </div>
                <div class="about-features">
                    <div class="feature">
                        <div class="feature-icon">üîí</div>
                        <h3>Completely Anonymous</h3>
                        <p>No registration required. Your identity stays protected.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üõ°Ô∏è</div>
                        <h3>Safe Environment</h3>
                        <p>Content filters and security measures protect all users.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üìù</div>
                        <h3>Categorized Expression</h3>
                        <p>Share under categories that match your emotions.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section id="categories" class="categories">
        <div class="container">
            <h2>Express Your Emotions</h2>
            <p class="section-subtitle">Choose a category that best fits what you're feeling</p>
            <div class="category-grid">
                <div class="category-card" data-category="joy">
                    <div class="category-icon">üòä</div>
                    <h3>Joy</h3>
                    <p>Share moments of happiness, gratitude, and celebration</p>
                </div>
                <div class="category-card" data-category="sadness">
                    <div class="category-icon">üò¢</div>
                    <h3>Sadness</h3>
                    <p>Express feelings of loss, grief, or melancholy</p>
                </div>
                <div class="category-card" data-category="anger">
                    <div class="category-icon">üò†</div>
                    <h3>Anger</h3>
                    <p>Release frustration, irritation, or righteous indignation</p>
                </div>
                <div class="category-card" data-category="exhaustion">
                    <div class="category-icon">üò¥</div>
                    <h3>Exhaustion</h3>
                    <p>Share feelings of burnout, fatigue, or overwhelm</p>
                </div>
                <div class="category-card" data-category="reflection">
                    <div class="category-icon">ü§î</div>
                    <h3>Reflection</h3>
                    <p>Thoughts, insights, and contemplative moments</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Submit Section -->
    <section id="submit" class="submit">
        <div class="container">
            <h2>Share Your Thoughts</h2>
            <p class="section-subtitle">Your identity remains completely anonymous</p>

            <form id="letter-form" class="letter-form">
                <div class="form-group">
                    <label for="category">Emotion Category</label>
                    <select id="category" name="category" required>
                        <option value="">Select a category</option>
                        <option value="joy">Joy</option>
                        <option value="sadness">Sadness</option>
                        <option value="anger">Anger</option>
                        <option value="exhaustion">Exhaustion</option>
                        <option value="reflection">Reflection</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="title">Title (Optional)</label>
                    <input type="text" id="title" name="title" placeholder="Give your letter a title...">
                </div>

                <div class="form-group">
                    <label for="content">Your Letter</label>
                    <textarea id="content" name="content" placeholder="Write your thoughts, feelings, or experiences here..." required></textarea>
                    <div class="char-count"><span id="char-counter">0</span>/2000 Characters</div>
                </div>

                <div class="form-group">
                    <label for="image-upload">Add an Image (Optional)</label>
                    <div class="image-upload-container">
                        <input type="file" id="image-upload" name="image" accept="image/*">
                        <label for="image-upload" class="upload-button">Choose Image</label>
                        <span id="file-name">No file chosen</span>
                    </div>
                    <div id="image-preview" class="image-preview"></div>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="terms" name="terms" required>
                    <label for="terms">I understand that my submission will be anonymous and publicly visible</label>
                </div>

                <button type="submit" class="submit-button" aria-label="Submit your anonymous letter">Share Anonymously</button>
            </form>
        </div>
    </section>

    <!-- Read Letters Section -->
    <section id="read" class="read-letters">
        <div class="container">
            <h2>Read Anonymous Letters</h2>
            <p class="section-subtitle">Connect with others through their shared experiences</p>

            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all" aria-label="Show all letters">All</button>
                <button class="filter-btn" data-filter="joy" aria-label="Filter letters by joy">Joy</button>
                <button class="filter-btn" data-filter="sadness" aria-label="Filter letters by sadness">Sadness</button>
                <button class="filter-btn" data-filter="anger" aria-label="Filter letters by anger">Anger</button>
                <button class="filter-btn" data-filter="exhaustion" aria-label="Filter letters by exhaustion">Exhaustion</button>
                <button class="filter-btn" data-filter="reflection" aria-label="Filter letters by reflection">Reflection</button>
            </div>

            <div class="letters-grid">
                <!-- Letters will be dynamically loaded here -->
                <div class="no-letters">
                    <p>No letters to display yet. Be the first to share your thoughts!</p>
                </div>
            </div>
            <div id="pagination" class="pagination"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
                        <div class="logo-icon" style="width:36px;height:36px;background:#2b6ef6;border-radius:8px;display:inline-grid;place-items:center;flex-shrink:0;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 10V8a6 6 0 1112 0v2" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="4" y="10" width="16" height="10" rx="2" stroke="white" stroke-width="1.6"/>
                            </svg>
                        </div>
                        <h2 style="margin:0;font-size:20px;">WhisperBox</h2>
                    </div>
                    <p>A safe space for anonymous self-expression</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#submit">Submit a Letter</a></li>
                        <li><a href="#read">Read Letters</a></li>
                    </ul>
                </div>
                <div class="footer-info">
                    <h3>Safety & Privacy</h3>
                    <p>All content is moderated to ensure a safe environment for everyone.</p>
                    <p>Your privacy is our priority - no personal information is collected.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WhisperBox. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="success-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" aria-label="Close success modal">&times;</span>
            <div class="modal-icon">‚úì</div>
            <h2>Thank You for Sharing</h2>
            <p>Your letter has been submitted anonymously. Your voice matters.</p>
            <button class="modal-button" aria-label="Close success modal and continue">Continue</button>
        </div>
    </div>

    <!-- Crisis Resources Modal (included via HTML file content) -->
    <div id="crisisResourcesModal" class="modal" style="display: none;">
      <div class="modal-content crisis-modal">
        <!-- Close button -->
        <button class="modal-close" onclick="closeCrisisModal()" aria-label="Close">√ó</button>

        <!-- Header with empathy message -->
        <div class="crisis-header">
          <h2>We Care About Your Safety</h2>
          <p class="crisis-subtitle">Help is available right now, 24/7</p>
        </div>

        <!-- User message based on detected crisis level -->
        <div id="crisisUserMessage" class="crisis-message">
          <!-- Dynamically populated by contentAnalysis.js -->
        </div>

        <!-- Resources List -->
        <div id="crisisResourcesList" class="crisis-resources">
          <!-- Populated dynamically -->
        </div>

        <!-- Option to proceed with posting -->
        <div class="crisis-actions">
          <p class="crisis-note">
            You can still share your story if you want to. We'll support you either way.
          </p>
          <div class="button-group">
            <button 
              id="cancelPostBtn" 
              class="btn btn-secondary" 
              onclick="closeWithoutPosting()">
              Talk to Someone First
            </button>
            <button 
              id="continuePostBtn" 
              class="btn btn-primary" 
              onclick="proceedWithPosting()">
              Continue Sharing
            </button>
          </div>
        </div>

        <!-- Optional: Resources by category -->
        <div id="crisisCategory" class="crisis-category-info" style="display: none;">
          <details>
            <summary>More Resources for <span id="categoryName"></span></summary>
            <div id="additionalResources" class="additional-resources">
              <!-- More resources populated here -->
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Auth Modal removed: now using dedicated login/signup pages -->

</body>
</html>
